{% if patients %}
<div class="patients-container">
  {% for patient in patients %}
    <div class="patient-card">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-start mb-1">
          <h6 class="card-title mb-0"><i class="bi bi-person-circle"></i> {{ patient.name }}</h6>
          {% if patient.status == 'accepted' %}
            <span class="badge bg-success">Accepted</span>
          {% elif patient.status == 'waiting' %}
            <span class="badge bg-warning text-dark">Waiting</span>
          {% endif %}
        </div>
        <p class="mb-1"><i class="bi bi-card-text"></i> <strong>ID:</strong> {{ patient.patient_id }}</p>
        <p class="mb-1"><i class="bi bi-calendar3"></i> <strong>Age:</strong> {{ patient.age }}</p>
        {% if patient.phone %}
          <p class="mb-1"><i class="bi bi-telephone"></i> <strong>Phone:</strong> {{ patient.phone }}</p>
        {% endif %}
        <p class="text-muted small mb-0"><i class="bi bi-file-text"></i> <strong>Reason:</strong> {{ patient.reason }}</p>
      </div>
      <div class="card-footer d-flex justify-content-between align-items-center py-1 px-2">
        <a class="btn btn-sm btn-primary" href="{% url 'doctor:patient_profile' patient.patient_id %}">
          <i class="bi bi-box-arrow-up-right"></i> Profile
        </a>
        {% if patient.status == 'accepted' %}
          <form method="POST" action="{% url 'doctor:remove_from_accepted' patient.patient_id %}" class="d-inline">
            {% csrf_token %}
            <button type="submit" class="btn btn-sm btn-outline-danger"
                    onclick="return confirm('Remove from accepted list?');">
              <i class="bi bi-check2-circle"></i> Done
            </button>
          </form>
        {% endif %}
      </div>
    </div>
  {% endfor %}
</div>
{% else %}
<div class="empty-state"><i class="bi bi-info-circle"></i> No accepted patients yet.</div>
{% endif %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

<style>
/* Container using inline-block for grid layout */
.patients-container {
  font-size: 0; /* remove whitespace between inline-block cards */
  text-align: left;
}

/* Patient Card */
.patient-card {
  display: inline-block;
  vertical-align: top;
  width: 30%; /* 4 cards per row with 2% gaps */
  margin: 1%;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  cursor: pointer;
  font-size: 14px; /* reset font size */
  min-height: 200px; /* consistent height */
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.patient-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 15px rgba(0,0,0,0.15);
}

.patient-card .card-body {
  padding: 10px;
}

.patient-card .card-title {
  font-weight: 600;
  font-size: 0.95rem;
  color: #2c3e50;
}

.patient-card .badge {
  font-size: 0.65rem;
  padding: 3px 6px;
  border-radius: 10px;
}

.patient-card .card-footer {
  background-color: #fff;
  border-top: 1px solid #eee;
  padding: 5px 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.patient-card .btn-primary {
  background: #3498db;
  border: none;
  font-size: 0.7rem;
  padding: 2px 6px;
}

.patient-card .btn-primary:hover {
  background: #2980b9;
}

.patient-card .btn-outline-danger {
  font-size: 0.7rem;
  padding: 2px 6px;
  border-radius: 6px;
}

.patient-card .btn-outline-danger:hover {
  background: #e74c3c;
  color: white;
  border-color: #e74c3c;
}

/* Empty state */
.empty-state {
  text-align: center;
  color: #777;
  font-size: 1.1rem;
  padding: 20px;
  border: 2px dashed #bbb;
  border-radius: 12px;
  font-weight: 500;
  background: #fff;
  margin-top: 20px;
}

/* Responsive */
@media (max-width: 1200px) {
  .patient-card { width: 31%; margin: 1%; } /* 3 per row */
}
@media (max-width: 992px) {
  .patient-card { width: 48%; margin: 1%; } /* 2 per row */
}
@media (max-width: 576px) {
  .patient-card { width: 98%; margin: 1% 0; } /* 1 per row */
}
</style>
